{% extends 'base.html' %} {% block body %}
<!-- <br />
{% with messages = get_flashed_messages() %} {% if messages %}
<div class="alert alert-danger" role="alert">
  {{messages[0]}}
</div>
{% endif %} {% endwith %}
<br /> -->
{% if (patients) %}
<br />
<h1>Patient Information</h1>
<br />
<h5>Enter Patient's SSNID</h5>
<form action="/diagnostic" method="POST">
  <select
    name="ssnId"
    class="selectpicker"
    data-live-search="true"
    data-size="5"
    data-width="80%"
    title="Search patient"
  >
    {% for patient in patients %}
    <option value="{{patient.ssnId}}">{{patient.ssnId}}</option>
    {% endfor %}
  </select>
  <br />
  <input class="btn btn-primary mt-4" type="submit" value="Search" />
  {% if (patient) %}
  <div class="row align-items-center justify-content-around mx-0">
    <div id="table" class="col-lg-12 px-4 py-4 order-1 order-lg-2">
      <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Patient Id</th>
            <th scope="col">Name</th>
            <th scope="col">Age</th>
            <th scope="col">Address</th>
            <th scope="col">DOJ</th>
            <th scope="col">Type of Room</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{patient.ssnId}}</td>
            <td>{{patient.name}}</td>
            <td>{{patient.age}}</td>
            <td>{{patient.address}}, {{patient.city}}, {{patient.state}}</td>
            <td>{{patient.admissionDate}}</td>
            <td>{{patient.bedType}}</td>
          </tr>
        </tbody>
      </table>
      <div class="row align-items-center justify-content-around mx-0">
        <div id="table" class="col-lg-12 px-4 py-4 order-1 order-lg-2">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Name of the test</th>
                <th scope="col">Amount</th>
              </tr>
            </thead>
            <tbody>
              {% for m,j in diagnosis %}
              <tr>
                <td>{{j[0].test_name}}</td>
                <td>{{j[0].Rate}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div> <!-- Table div ends here -->
        <h2>Diagnostics conducted</h2>
      </div>  <!-- Row Align div ends here -->
      <div class="row align-items-center justify-content-around mx-0">
        <a class="btn btn-success" href="/add_test/{{patient.ssnId}}">Add Diagnostics</a>
        <div id="table" class="col-lg-12 px-4 py-4 order-1 order-lg-2">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Name of the test</th>
                <th scope="col">Amount</th>
              </tr>
            </thead>
            <tbody>
              <!-- to display data according to the availablility of diagnosticTests -->
              {% if dTestList %}
               {% for test,rate in dTestList %}
              <tr>
                <td>{{test}}</td>
                <td>{{rate}}</td>
              </tr>
              {% endfor %} 
              {% else %}
              <tr>
                <td>N/A</td>
                <td>N/A</td>
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div> <!-- Table div ends here -->
      </div> <!-- Row Align div ends here -->
    </div>
  </div>
  <div class="row align-items-center justify-content-around mx-0">

  <a class="btn btn-success" href="">Update</a>
  </div>
  {% endif %}
</form>
{% endif %}
<br />

<!-- One update button is missing here. Please look into it -->

{% endblock %}
